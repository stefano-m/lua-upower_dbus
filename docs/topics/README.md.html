<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<head>
    <title>Lua UPower DBus</title>
    <link rel="stylesheet" href="../ldoc.css" type="text/css" />
</head>
<body>

<div id="container">

<div id="product">
	<div id="product_logo"></div>
	<div id="product_name"><big><b></b></big></div>
	<div id="product_description"></div>
</div> <!-- id="product" -->


<div id="main">


<!-- Menu -->

<div id="navigation">
<br/>
<h1>upower_dbus</h1>



<h2>Contents</h2>
<ul>
<li><a href="#Requirements">Requirements </a></li>
<li><a href="#Installation">Installation </a></li>
<li><a href="#Example">Example </a></li>
</ul>


<h2>Topics</h2>
<ul class="">
  <li><strong>README</strong></li>
</ul>
<h2>Modules</h2>
<ul class="nowrap">
  <li><a href="../index.html">upower_dbus</a></li>
</ul>

</div>

<div id="content">


<h1>Get information about your power devices using <a href="https://upower.freedesktop.org/">UPower</a> and DBus.</h1>

<p><a name="Requirements"></a></p>
<h2>Requirements</h2>

<p>In addition to the requirements specified in the rockspec file, you need UPower
and DBus (usually both are present in modern GNU/Linux systems) as well as
<a href="https://gi.readthedocs.io/en/latest/">GObject Introspection</a>.</p>

<p>Note that your user may need specific permissions to access the UPower DBus
interface.</p>

<p><a name="Installation"></a></p>
<h2>Installation</h2>

<h3>Luarocks</h3>

<p>This module can be installed with <a href="http://luarocks.org/">Luarocks</a> by running</p>


<pre>
luarocks install upower_dbus
</pre>

<p>Use the <code>--local</code> option in <code>luarocks</code> if you don't want or can't install it system-wide.</p>

<h3>NixOS</h3>

<p>If you are on NixOS, you can install this package from the <a href="./flake.nix">flake</a>.</p>

<p>Note that the older method of using
<a href="https://github.com/stefano-m/nix-stefano-m-nix-overlays">nix-stefano-m-overlays</a>
is currently unmaintained.</p>


<p><a name="Example"></a></p>
<h2>Example</h2>

<p>This module exposes the following</p>

<ul>
    <li><a href="../index.html#upower.Manager">upower.Manager</a> singleton, containing its own properties and the <a href="../index.html#upower.Manager.devices">devices</a> array.</li>
    <li><a href="../index.html#upower.enums">upower.enums</a> table containing the UPower enumerations as arrays of strings.</li>
    <li><a href="../index.html#upower.create_device">upower.create_device</a> factory to create <code>Device</code> objects, although it's
    advised to use the Manager's <a href="../index.html#upower.Manager.devices">devices</a> property rather then building them by
    hand.</li>
    <li><a href="../index.html#upower.display_device">upower.display_device</a> representing <a href="https://upower.freedesktop.org/docs/UPower.html#UPower.GetDisplayDevice">the status to show in a desktop
    environment</a>.</li>
</ul>


<pre>
GLib = <span class="global">require</span>(<span class="string">"lgi"</span>).GLib
ctx = GLib.<span class="function-name">MainLoop</span>():<span class="function-name">get_context</span>()
upower = <span class="global">require</span>(<span class="string">"upower_dbus"</span>)
<span class="comment">-- What version of UPower is in use?
</span>upower.Manager.DaemonVersion
<span class="comment">-- Are we using a battery?
</span>upower.Manager.OnBattery <span class="comment">-- true or false
</span><span class="comment">-- Enumerate the Device Types known by UPower
</span><span class="keyword">for</span> _, v <span class="keyword">in</span> <span class="global">ipairs</span>(upower.enums.DeviceType) <span class="keyword">do</span> <span class="global">print</span>(v) <span class="keyword">end</span>
<span class="comment">-- Say that the first device is a battery
</span>battery = upower.Manager.devices[<span class="number">1</span>]
<span class="global">print</span>(battery.Percentage) <span class="comment">-- may print 100.0
</span><span class="comment">-- Update the devices in case something changed
</span>ctx:<span class="function-name">iteration</span>()
<span class="comment">-- The battery discharged a bit
</span>battery.Percentage <span class="comment">-- may print 99.0
</span>battery.WarningLevel <span class="comment">-- CamelCase, may print 4.0
</span>battery.warninglevel <span class="comment">-- lower case, may print Critical</span>
</pre>



</div> <!-- id="content" -->
</div> <!-- id="main" -->
<div id="about">
<i>generated by <a href="http://github.com/lunarmodules/LDoc">LDoc 1.5.0</a></i>
<i style="float:right;">Last updated 1980-01-01 00:00:00 </i>
</div> <!-- id="about" -->
</div> <!-- id="container" -->
</body>
</html>
